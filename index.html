<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Transfer Money App</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 20px;
    }

    button {
        background-color: #419e44;
        border: none;
        color: white;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 10px;
        cursor: pointer;
        border-radius: 5px;
    }

    button:hover {
        background-color: #45a049;
    }

    .container {
        max-width: 600px;
        margin: 0 auto;
        background-color: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
        text-align: center;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }

    th {
        background-color: #f2f2f2;
    }

    .transaction-details {
        margin-top: 20px;
    }

    .transaction-details p {
        margin-bottom: 5px;
    }
</style>
</head>
<body>

<div class="container">
    <h1>Transfer Money App</h1>

    <button onclick="depositMoney()">Deposit Money</button>
    <button onclick="transferMoney()">Transfer Money</button>
    <button onclick="resetBalance()">Reset Balance</button>

    <div class="transaction-details" id="transactionDetails" style="display: none;">
        <h2>Transaction Details</h2>
        <table>
            <tr>
                <th>Item</th>
                <th>Details</th>
            </tr>
            <tr>
                <td>Amount Transferred</td>
                <td id="transferredAmount"></td>
            </tr>
            <tr>
                <td>Recipient's Account Number</td>
                <td id="recipientAccountNumber"></td>
            </tr>
            <tr>
                <td>Recipient's Bank</td>
                <td id="recipientBank"></td>
            </tr>
            <tr>
                <td>Remaining Balance</td>
                <td id="remainingBalance"></td>
            </tr>
        </table>
    </div>
</div>

<script>

var currentBalance = 1000;

function generateAccountNumber() {
    var accountNumber = "";
    for (var i = 0; i < 10; i++) {
        accountNumber += Math.floor(Math.random() * 10);
    }
    return accountNumber;
}

// List of recipient's banks
var recipientBanks = ["Access Bank", "EcoBank Mobile", "FirstBank", "UBA"];

// Default PIN for confirmation
var defaultPin = "1234";

function displayBalance() {
    alert("Your current balance is: N" + formatCurrency(currentBalance));
}

function depositMoney() {
    var depositAmount = parseFloat(prompt("Enter the amount to deposit:"));
    if (isNaN(depositAmount) || depositAmount <= 0) {
        alert("Invalid amount entered.");
        return;
    }

    currentBalance += depositAmount;
    alert("Deposit of N" + formatCurrency(depositAmount) + " successful!\nNew balance: N" + formatCurrency(currentBalance));
}

function resetBalance() {
    currentBalance = 1000; // Reset balance to default
    alert("Balance reset to N" + formatCurrency(currentBalance));
}

function transferMoney() {
    // Step 1: Display current balance
    displayBalance();

    // Step 2: Prompt user to enter the amount to transfer
    var amount = parseFloat(prompt("Enter the amount to transfer:"));
    if (isNaN(amount) || amount <= 0) {
        alert("Invalid amount entered.");
        return;
    }

    if (amount > currentBalance) {
        alert("Insufficient funds.");
        return;
    }

    // Step 3: Generate 10-digit account number
    var accountNumber = generateAccountNumber();

    // Step 4: Select recipient's bank
    var bankIndex = prompt("Select the recipient's bank:\n" + recipientBanks.join("\n"));
    if (!validateBankIndex(bankIndex)) {
        alert("Transfer cancelled or invalid bank selected.");
        return;
    }

    var bank = recipientBanks[parseInt(bankIndex)];

    // Step 5: Enter PIN for confirmation
    var pin = prompt("Enter your PIN for confirmation (default PIN is 1234):");
    if (!validatePIN(pin)) {
        alert("Transfer cancelled.");
        return;
    }

    // Step 6: Confirm the transfer
    var confirmed = confirm("Transfer of N" + formatCurrency(amount) + " to account number " + accountNumber + " at " + bank + " confirmed. Do you want to proceed?");
    if (confirmed) {
        currentBalance -= amount; // Deduct transferred amount from balance
        alert("Transfer successful!\nNew balance: N" + formatCurrency(currentBalance));

        // Step 7: Display transaction details
        displayTransactionDetails(amount, accountNumber, bank);
    } else {
        alert("Transfer cancelled.");
    }
}

function validateBankIndex(index) {
    return index !== null && index !== "" && !isNaN(parseInt(index)) && parseInt(index) >= 0 && parseInt(index) < recipientBanks.length;
}

function validatePIN(pin) {
    return pin !== null && pin === defaultPin;
}

function formatCurrency(amount) {
    return amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
}

function displayTransactionDetails(amount, accountNumber, bank) {
    var details = document.getElementById("transactionDetails");
    details.style.display = "block";

    document.getElementById("transferredAmount").innerText = "N" + formatCurrency(amount);
    document.getElementById("recipientAccountNumber").innerText = accountNumber;
    document.getElementById("recipientBank").innerText = bank;
    document.getElementById("remainingBalance").innerText = "N" + formatCurrency(currentBalance);
}
</script>

</body>
</html>
